@model LibrarySystem.Generic.HomeViewModel
@{
	ViewData["Title"] = "Home";
}

<!-- Hero Section -->	
<section class="hero-section d-flex align-items-center">
	<div class="hero-text-container">
		<h1 class="display-3">Discover Your Next Favorite Book</h1>
		<p class="lead">Explore featured books and authors in our library collection.</p>
		<a href="#about" class="btn btn-primary btn-lg mt-3">Explore Now</a>
	</div>
	<div class="hero-image-container">
		<img src="/images/hero-library.jpg" alt="Library Image" class="hero-image" />
	</div>
</section>

<!-- About Section -->
<section id="about" class="content-section-secondary bg-primary text-center py-5 my-5">
	<div class="container my-5">
		<h2 class="mb-4">About Our Library</h2>
		<p class="lead">We provide access to a wide collection of books from various genres and authors. Our mission is to foster a love for reading and lifelong learning.</p>
	</div>
</section>

<!-- Featured Books Section -->
<section id="featured-books" class="content-section text-center py-5">
	<div class="container">
		<h2 class="mb-5">New Books</h2>
		<div class="row justify-content-center g-4">
			@foreach (var book in Model.Books.Take(4))
			{
				<div class="col-sm-6 col-md-4 col-lg-3" data-aos="fade-up" data-aos-delay="100">
					<div class="card book-card border-0 shadow-sm h-100">
						@if (book.Image != null)
						{
							<img src="data:image/jpeg;base64,@Convert.ToBase64String(book.Image)"
								 class="card-img-top book-img" alt="@book.Title" />
						}
						else
						{
							<img src="/images/default-book-3.png"
								 class="card-img-top book-img" alt="No Image" />
						}
						<div class="card-body d-flex flex-column">
							<h5 class="card-title truncate-2">@book.Title</h5>
							<p class="card-text text-muted truncate-3 flex-grow-1">@book.Description</p>
							<a href="#" class="btn btn-outline-primary mt-3">Read More</a>
						</div>
					</div>
				</div>
			}
		</div>
	</div>
</section>

<section id="featured-authors" class="content-section bg-light text-center py-5">
	<div class="container">
		<h2 class="mb-4 text-primary">Popular Authors</h2>
		<div class="d-flex flex-wrap justify-content-center gap-4">
			@foreach (var author in Model.Authors.Take(4))
			{
				<div class="card author-card shadow-sm">
					@if (author.Image != null)
					{
						<img src="data:image/jpeg;base64,@Convert.ToBase64String(author.Image)" class="card-img-top" alt="@author.Name" />
					}
					else
					{
						<img src="/images/default-author.jpg" class="card-img-top" alt="No Image" />
					}
					<div class="card-body">
						<h5 class="card-title">@author.Name</h5>
						<p class="card-text text-muted truncate-3">@author.Description</p>
					</div>
				</div>
			}
		</div>
	</div>
</section>


<style>
	.hero-section {
		height: 100vh;
		display: flex;
		position: relative;
		background: linear-gradient(to right, #ffffff 50%, transparent 50%);
	}

	.hero-text-container {
		position: absolute;
		top: 50%;
		left: 5%;
		transform: translateY(-50%);
		z-index: 2;
		max-width: 40%;
		background-color: rgba(255, 255, 255, 0.85);
		padding: 2rem;
		border-radius: 12px;
		box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
	}

	.hero-image-container {
		width: 60%;
		margin-left: auto;
		height: 100%;
		overflow: hidden;
	}

	.hero-image {
		width: 100%;
		height: 100%;
		object-fit: cover;
		filter: brightness(0.9);
	}

	.content-section {
		transition: all 0.3s ease-in-out;
	}

	.content-section-secondary {
		transition: all 0.3s ease-in-out;
		background-color: var(--bs-secondary-background);
	}

	.truncate-2 {
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
		text-overflow: ellipsis;
	}

	.truncate-3 {
		display: -webkit-box;
		-webkit-line-clamp: 3;
		-webkit-box-orient: vertical;
		overflow: hidden;
		text-overflow: ellipsis;
	}
</style>

<script>
	document.addEventListener("DOMContentLoaded", () => {
		const carousel = document.getElementById("book-carousel");
		const cards = carousel.querySelectorAll('.book-card');

		// Clone cards for seamless loop
		cards.forEach(card => {
			const clone = card.cloneNode(true);
			carousel.appendChild(clone);
		});

		const cardWidth = cards[0].offsetWidth + 16; // 16px = margin (adjust if needed)
		let currentScroll = 0;

		function scrollStep() {
			currentScroll += cardWidth;

			// Reset if halfway through the carousel (original + cloned)
			if (currentScroll >= carousel.scrollWidth / 2) {
				carousel.scrollLeft = 0;
				currentScroll = cardWidth;
			}

			carousel.scrollTo({
				left: currentScroll,
				behavior: "smooth"
			});
		}

		let interval = setInterval(scrollStep, 2000); // every 2 seconds

		// Optional: pause on hover
		carousel.addEventListener("mouseenter", () => clearInterval(interval));
		carousel.addEventListener("mouseleave", () => {
			interval = setInterval(scrollStep, 2000);
		});
	});
</script>