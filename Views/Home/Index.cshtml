@model LibrarySystem.Generic.HomeViewModel
@{
	ViewData["Title"] = "Home";
}

<!-- Hero Section -->	
<section class="hero-section d-flex align-items-center">
	<div class="hero-text-container">
		<h1 class="display-3">Discover Your Next Favorite Book</h1>
		<p class="lead">Explore featured books and authors in our library collection.</p>
		<a href="#about" class="btn btn-primary btn-lg mt-3">Explore Now</a>
	</div>
	<div class="hero-image-container">
		<img src="/images/hero-library.jpg" alt="Library Image" class="hero-image" />
	</div>
</section>

<!-- About Section -->
<section id="about" class="content-section-secondary bg-primary text-center py-5 my-5">
	<div class="container my-5">
		<h2 class="mb-4">About Our Library</h2>
		<p class="lead">We provide access to a wide collection of books from various genres and authors. Our mission is to foster a love for reading and lifelong learning.</p>
	</div>
</section>

<!-- Featured Books Section -->
<section id="featured-books" class="content-section text-center py-5">
	<div class="container">
		<h2 class="mb-5 text-primary">New Books</h2>
		<div class="row justify-content-center g-4">
			@foreach (var book in Model.Books.OrderBy(b => Guid.NewGuid()).Take(4))
			{
				<div class="col-sm-6 col-md-4 col-lg-3" data-aos="fade-up" data-aos-delay="100">
					<div class="card book-card border-0 shadow-sm h-100">
						@if (book.Image != null)
						{
							<img src="data:image/jpeg;base64,@Convert.ToBase64String(book.Image)"
								 class="card-img-top book-img" alt="@book.Title" />
						}
						else
						{
							<img src="/images/default-book-3.png"
								 class="card-img-top book-img" alt="No Image" />
						}
						<div class="card-body d-flex flex-column">
							<h5 class="card-title truncate-2">@book.Title</h5>
							<p class="card-text text-muted truncate-3 flex-grow-1">@book.Description</p>
							<a href="#" class="btn btn-outline-primary mt-3">Read More</a>
						</div>
					</div>
				</div>
			}
		</div>
	</div>
</section>

<!-- Benefits Section -->
<section id="why-library" class="content-section bg-primary text-white text-center py-5">
	<div class="container">
		<h2 class="mb-4">Why Use Our Library System?</h2>
		<p class="lead mb-5">Discover the advantages of using our digital platform designed for readers, students, and lifelong learners.</p>
		<div class="row justify-content-center g-4">
			<div class="col-md-4" data-aos="fade-up">
				<i class="bi bi-clock-history" style="font-size: 3rem;"></i>
				<h5 class="fw-bold mt-3">24/7 Access</h5>
				<p class="text-white-50">Borrow and read books anytime, anywhere—no need to wait for opening hours.</p>
			</div>
			<div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
				<i class="bi bi-person-lines-fill" style="font-size: 3rem;"></i>
				<h5 class="fw-bold mt-3">Personalized Dashboard</h5>
				<p class="text-white-50">Track your borrow history, manage your returns, and explore book suggestions tailored to your interests.</p>
			</div>
			<div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
				<i class="bi bi-phone" style="font-size: 3rem;"></i>
				<h5 class="fw-bold mt-3">Multi-Device Friendly</h5>
				<p class="text-white-50">Access the library on your desktop, tablet, or mobile device—seamlessly and securely.</p>
			</div>
		</div>
	</div>
</section>

<section id="featured-authors" class="content-section bg-light text-center py-5">
	<div class="container">
		<h2 class="mb-4 text-primary">Popular Authors</h2>
		<div class="d-flex flex-wrap justify-content-center gap-4">
			@foreach (var author in Model.Authors.OrderBy(b => Guid.NewGuid()).Take(4))
			{
				<div class="card author-card shadow-sm">
					@if (author.Image != null)
					{
						<img src="data:image/jpeg;base64,@Convert.ToBase64String(author.Image)" class="card-img-top" alt="@author.Name" />
					}
					else
					{
						<img src="/images/default-author.jpg" class="card-img-top" alt="No Image" />
					}
					<div class="card-body">
						<h5 class="card-title">@author.Name</h5>
						<p class="card-text text-muted truncate-3">@author.Description</p>
					</div>
				</div>
			}
		</div>
	</div>
</section>

<!-- Borrowing Instructions Section -->
<section id="how-it-works" class="content-section text-center py-5">
	<div class="container">
		<h2 class="mb-4 text-primary">How to Borrow & Return Books</h2>
		<p class="lead mb-5">Our digital library system makes it easy to borrow and return books online. Follow the simple steps below to get started.</p>
		<div class="row justify-content-center g-5">
			<div class="col-md-4" data-aos="fade-up">
				<i class="bi bi-person-circle text-primary" style="font-size: 4rem;"></i>
				<h5 class="fw-bold mt-3">1. Register / Log In</h5>
				<p class="text-muted">Create an account or log in to access the library's online services.</p>
			</div>
			<div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
				<i class="bi bi-journal-bookmark-fill text-primary" style="font-size: 4rem;"></i>
				<h5 class="fw-bold mt-3">2. Browse & Borrow</h5>
				<p class="text-muted">Explore our collection, view details, and click "Borrow" to check out a book.</p>
			</div>
			<div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
				<i class="bi bi-arrow-return-left text-primary" style="font-size: 4rem;"></i>
				<h5 class="fw-bold mt-3">3. Return Online</h5>
				<p class="text-muted">Visit your profile to return books online once you're done reading.</p>
			</div>
		</div>
	</div>
</section>

<!-- Testimonials Section -->
<section id="testimonials" class="content-section bg-light text-center py-5">
	<div class="container">
		<h2 class="mb-4 text-primary">What Our Users Say</h2>
		<div class="row justify-content-center g-4">
			<div class="col-md-4" data-aos="fade-up">
				<div class="card shadow-sm h-100">
					<div class="card-body">
						<i class="bi bi-chat-quote-fill text-primary" style="font-size: 2rem;"></i>
						<p class="card-text mt-3">"An amazing platform! I can borrow books without even stepping out of my house. Super convenient for my busy schedule."</p>
						<h6 class="fw-bold mt-3">– Ayesha K., University Student</h6>
					</div>
				</div>
			</div>
			<div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
				<div class="card shadow-sm h-100">
					<div class="card-body">
						<i class="bi bi-chat-quote-fill text-primary" style="font-size: 2rem;"></i>
						<p class="card-text mt-3">"The online return process is seamless and the book recommendations are always on point."</p>
						<h6 class="fw-bold mt-3">– Jamal R., Educator</h6>
					</div>
				</div>
			</div>
			<div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
				<div class="card shadow-sm h-100">
					<div class="card-body">
						<i class="bi bi-chat-quote-fill text-primary" style="font-size: 2rem;"></i>
						<p class="card-text mt-3">"Fantastic system! I use it on my phone daily to explore new books during my commute."</p>
						<h6 class="fw-bold mt-3">– Fatima L., Book Lover</h6>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<!-- FAQ Section -->
<section id="faq" class="content-section text-center py-5">
	<div class="container">
		<h2 class="mb-4 text-primary">Frequently Asked Questions</h2>
		<div class="accordion accordion-flush text-start mx-auto" id="faqAccordion" style="max-width: 800px;">
			<div class="accordion-item">
				<h2 class="accordion-header" id="faqHeadingOne">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseOne" aria-expanded="false" aria-controls="faqCollapseOne">
						How do I borrow a book?
					</button>
				</h2>
				<div id="faqCollapseOne" class="accordion-collapse collapse" aria-labelledby="faqHeadingOne" data-bs-parent="#faqAccordion">
					<div class="accordion-body">
						Log in to your account, navigate to the book you want, and click the "Borrow" button. The book will then appear in your profile.
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="faqHeadingTwo">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseTwo" aria-expanded="false" aria-controls="faqCollapseTwo">
						Can I return a book early?
					</button>
				</h2>
				<div id="faqCollapseTwo" class="accordion-collapse collapse" aria-labelledby="faqHeadingTwo" data-bs-parent="#faqAccordion">
					<div class="accordion-body">
						Yes, you can return any borrowed book from your profile dashboard at any time before the due date.
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="faqHeadingThree">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseThree" aria-expanded="false" aria-controls="faqCollapseThree">
						What if I forget to return a book?
					</button>
				</h2>
				<div id="faqCollapseThree" class="accordion-collapse collapse" aria-labelledby="faqHeadingThree" data-bs-parent="#faqAccordion">
					<div class="accordion-body">
						Don't worry! We'll send you a reminder. You may lose borrowing privileges temporarily until the book is returned.
					</div>
				</div>
			</div>
		</div>
	</div>
</section>


<style>
	.hero-section {
		height: 100vh;
		display: flex;
		position: relative;
		background: linear-gradient(to right, #ffffff 50%, transparent 50%);
	}

	.hero-text-container {
		position: absolute;
		top: 50%;
		left: 5%;
		transform: translateY(-50%);
		z-index: 2;
		max-width: 40%;
		background-color: rgba(255, 255, 255, 0.85);
		padding: 2rem;
		border-radius: 12px;
		box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
	}

	.hero-image-container {
		width: 60%;
		margin-left: auto;
		height: 100%;
		overflow: hidden;
	}

	.hero-image {
		width: 100%;
		height: 100%;
		object-fit: cover;
		filter: brightness(0.9);
	}

	.content-section {
		transition: all 0.3s ease-in-out;
	}

	.content-section-secondary {
		transition: all 0.3s ease-in-out;
		background-color: var(--bs-secondary-background);
	}

	.truncate-2 {
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
		text-overflow: ellipsis;
	}

	.truncate-3 {
		display: -webkit-box;
		-webkit-line-clamp: 3;
		-webkit-box-orient: vertical;
		overflow: hidden;
		text-overflow: ellipsis;
	}
</style>

<script>
	document.addEventListener("DOMContentLoaded", () => {
		const carousel = document.getElementById("book-carousel");
		const cards = carousel.querySelectorAll('.book-card');

		// Clone cards for seamless loop
		cards.forEach(card => {
			const clone = card.cloneNode(true);
			carousel.appendChild(clone);
		});

		const cardWidth = cards[0].offsetWidth + 16; // 16px = margin (adjust if needed)
		let currentScroll = 0;

		function scrollStep() {
			currentScroll += cardWidth;

			// Reset if halfway through the carousel (original + cloned)
			if (currentScroll >= carousel.scrollWidth / 2) {
				carousel.scrollLeft = 0;
				currentScroll = cardWidth;
			}

			carousel.scrollTo({
				left: currentScroll,
				behavior: "smooth"
			});
		}

		let interval = setInterval(scrollStep, 2000); // every 2 seconds

		// Optional: pause on hover
		carousel.addEventListener("mouseenter", () => clearInterval(interval));
		carousel.addEventListener("mouseleave", () => {
			interval = setInterval(scrollStep, 2000);
		});
	});
</script>